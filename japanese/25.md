---
original: 9fd757c3e88d8f75acb71cfad52b886ecfee37e8023bac54e3cc3c9ef8237a12
---

NIP-25
======

リアクション
-----------

`draft` `optional`

リアクションは、他のイベントに反応するために使用される `kind 7` イベントです。

`content` が `+` 文字列に設定された一般的なリアクションは、「いいね」または「アップボート」として解釈されるべきです。

`content` が `-` に設定されたリアクションは、「嫌い」または「ダウンボート」として解釈されるべきです。これは「いいね」としてカウントされるべきではなく、投稿に対するダウンボートまたは嫌いとして表示される場合があります。クライアントは、Redditのようなアップボートとダウンボートのシステムでいいねと嫌いを集計したり、別々の集計として表示したりすることもできます。

`content` は絵文字、または [NIP-30](30.md) のカスタム絵文字である場合があり、この場合は「いいね」または「嫌い」として解釈されるか、クライアントがこの絵文字リアクションを投稿に表示する場合があります。`content` が空の文字列の場合、クライアントはそれを "+" と見なすべきです。

タグ
----

リアクションイベントには、ユーザーが反応している投稿からの `e` タグと `p` タグを含めるべきです（オプションで、ターゲットが置換可能イベントの場合は `a` タグも含めます）。これにより、ユーザーは自分が言及された投稿へのリアクションを通知されます。`e` タグを含めることで、クライアントは個々の投稿や、スレッド内のすべての投稿に関連するすべてのリアクションを取得できます。`a` タグにより、クライアントは置換可能イベントのすべてのバージョンのリアクションを検索できます。

最後の `e` タグは、リアクションの対象となる投稿の `id` でなければなりません。

最後の `p` タグは、リアクションの対象となるイベントの `pubkey` でなければなりません。

`a` タグには、リアクションの対象となる置換可能イベントの座標（`kind:pubkey:d-tag`）が含まれていなければなりません。

リアクションイベントには、リアクションの対象となるイベントの種類番号を文字列化した値を持つ `k` タグを含めることができます。

コード例

```swift
func make_like_event(pubkey: String, privkey: String, liked: NostrEvent) -> NostrEvent {
    var tags: [[String]] = liked.tags.filter {
    	tag in tag.count >= 2 && (tag[0] == "e" || tag[0] == "p")
    }
    tags.append(["e", liked.id])
    tags.append(["p", liked.pubkey])
    tags.append(["k", liked.kind])
    let ev = NostrEvent(content: "+", pubkey: pubkey, kind: 7, tags: tags)
    ev.calculate_id()
    ev.sign(privkey: privkey)
    return ev
}
```

ウェブサイトへのリアクション
--------------------------

リアクションの対象がウェブサイトの場合、リアクションは `kind 17` イベントでなければならず、ウェブサイトのURLを含む `r` タグを含まなければなりません。

```json
{
  "kind": 17,
  "content": "⭐",
  "tags": [
    ["r", "https://example.com/"]
  ],
  ...other fields
}
```

URLは[正規化](https://datatracker.ietf.org/doc/html/rfc3986#section-6)されるべきです。これにより、同じウェブサイトへのリアクションがクエリから省略されないようにします。
URLにフラグメントを付けて、ページの特定のセクションにリアクションすることができます。
フラグメント付きのURLは元のURLと同じとは見なされないことに注意してください。

カスタム絵文字リアクション
------------------------

クライアントは、リアクションの内容にカスタム絵文字（[NIP-30](30.md)）の `:shortcode:` を指定できます。クライアントは絵文字タグを参照し、ショートコードが指定されている場合、内容を絵文字としてレンダリングする必要があります。

```json
{
  "kind": 7,
  "content": ":soapbox:",
  "tags": [
    ["emoji", "soapbox", "https://gleasonator.com/emoji/Gleasonator/soapbox.png"]
  ],
  ...other fields
}
```

内容には1つの `:shortcode:` のみを設定できます。また、絵文字タグは1つでなければなりません。